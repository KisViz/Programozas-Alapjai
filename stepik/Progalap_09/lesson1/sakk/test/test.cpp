#include <gtest/gtest.h>

#define main main_0
#include "../src/sakk.c"
#undef main

#include "../../tools.cpp"

void doTest(const char* fajlnev, int szinek, int meret, int* elvart) {
    FILE* f = fopen(fajlnev, "r");

    char p, p2;
    int szinekk;
    int szelesseg;
    int magassag;
    fscanf(f, "%c%c%d%d%d", &p, &p2, &szelesseg, &magassag, &szinekk);
    ASSERT_EQ(p, 'P');
    ASSERT_EQ(p2, '2');
    ASSERT_EQ(szinekk, szinek);
    ASSERT_EQ(szelesseg, meret);
    ASSERT_EQ(magassag, meret);

    int eredmenyek[meret*meret];
    for (int i = 0; i < meret*meret; i++) {
        fscanf(f, "%d", &eredmenyek[i]);
    }

    ASSERT_ARRAY_EQ(eredmenyek, elvart, meret*meret)
}

TEST(Teszt, 01) { // NOLINT(cert-err58-cpp) suppress for initialization static field in generated class
    int szinek = 1;
    int meret = 8;
    int elvart[] = {
            1, 0, 1, 0, 1, 0, 1, 0,
            0, 1, 0, 1, 0, 1, 0, 1,
            1, 0, 1, 0, 1, 0, 1, 0,
            0, 1, 0, 1, 0, 1, 0, 1,
            1, 0, 1, 0, 1, 0, 1, 0,
            0, 1, 0, 1, 0, 1, 0, 1,
            1, 0, 1, 0, 1, 0, 1, 0,
            0, 1, 0, 1, 0, 1, 0, 1
    };
    const char* fajlnev = "eredmeny.pgm";
    rajzol(fajlnev, szinek, meret);

    doTest(fajlnev, szinek, meret, elvart);
}

TEST(Teszt, 02) { // NOLINT(cert-err58-cpp) suppress for initialization static field in generated class
    int szinek = 3;
    int meret = 16;
    int elvart[] = {
            3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0,
            3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0,
            0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3,
            0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3,
            3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0,
            3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0,
            0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3,
            0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3,
            3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0,
            3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0,
            0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3,
            0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3,
            3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0,
            3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0,
            0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3,
            0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 3, 3
    };
    const char* fajlnev = "eredmeny.pgm";
    rajzol(fajlnev, szinek, meret);

    doTest(fajlnev, szinek, meret, elvart);
}

TEST(Teszt, 03) { // NOLINT(cert-err58-cpp) suppress for initialization static field in generated class
    int szinek = 1511;
    int meret = 32;
    int elvart[] = {
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511,
            0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511, 0, 0, 0, 0, 1511, 1511, 1511, 1511
    };
    const char* fajlnev = "cica.pgm";
    rajzol(fajlnev, szinek, meret);

    doTest(fajlnev, szinek, meret, elvart);
}